(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{152:function(t,e,n){},17:function(t,e,n){},278:function(t,e,n){"use strict";var a=n(152);n.n(a).a},295:function(t,e,n){"use strict";n.r(e);n(28),n(259),n(22);var a=n(261),o=n.n(a),i=n(47),s={data:function(){return{backgroundUrl:[],file:null,wrongFile:!1,upload:!1}},props:{uploadurl:{type:String}},components:{"s-button":i.a},methods:{deleteItem:function(t){var e=this.backgroundUrl.indexOf(t);this.backgroundUrl.splice(e,1)},checkType:function(t){if("image"!=t.type.split("/")[0])return alert("请上传图片"),void(this.wrongFile=!0)},checkSize:function(t){if(Math.round(t.size/1024/1024)>=3)return alert("请上传小于少于3M的图片"),void(this.wrongFile=!0)},transformUrl:function(t){var e=this,n=new FileReader;n.readAsDataURL(t),n.onload=function(t){var n=t.target.result;e.backgroundUrl.push(n)},console.log(this.backgroundUrl)},preview:function(t){var e=this,n=t.target.files;this.file=n;for(var a=0;a<n.length;a++){if(this.checkType(n[a]),this.checkSize(n[a]),this.wrongFile)return void(this.wrongFile=!1);this.transformUrl(n[a])}this.$nextTick(function(){console.log("fuck"),console.log(e.backgroundUrl)})},call:function(){this.backgroundUrl.pop()},submit:function(){for(var t=this,e=new FormData,n=0;n<this.file;n++)e.append("attachment",this.file[n]);var a=this.uploadurl;0!==this.backgroundUrl.length?o.a.post(a,e,{header:{"Content-Type":"multipart/form-data"}}).then(function(e){console.log(e),t.upload=!0}).catch(function(t){console.log(t),alert("上传失败")}):alert("未上传文件")}}},l=(n(278),n(1)),c={name:"upload-demos",data:function(){return{code1:'\n    <h4>照片墙</h4>\n    <s-upload uploadurl="https://easy-mock.com/mock/5d08939197ae0a474a534950/file/addfile"></s-upload>\n    '.replace(/(^\s)+|(\s*$)+/g,"")}},components:{"s-upload":Object(l.a)(s,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"wrapper",staticStyle:{display:"flex"}},[t._l(t.backgroundUrl,function(e){return n("div",{key:e,staticClass:"xxx"},[n("div",{staticClass:"item",style:{background:"url("+e+") no-repeat  center/cover"}},[n("s-icon",{staticStyle:{"z-index":"22"},attrs:{name:"red-garbage"},on:{click:function(n){return t.deleteItem(e)}}}),t._v(" "),t.upload?n("s-icon",{staticStyle:{"z-index":"22"},attrs:{name:"check-circle"}}):t._e()],1)])}),t._v(" "),n("div",{staticClass:"container"},[n("input",{staticClass:"uploadButton",attrs:{id:"fileload",type:"file",multiple:"",name:"upload"},on:{change:function(e){return t.preview(e)}}}),t._v(" "),n("s-icon",{attrs:{name:"plus"}})],1)],2),t._v(" "),n("div",{staticClass:"buttonGroup"},[n("s-button",{ref:"submit",attrs:{types:"success"},on:{click:t.submit}},[t._v("上传")]),t._v(" "),n("s-button",{attrs:{types:"success"},on:{click:t.call}},[t._v("取消")])],1)])},[],!1,null,"6e2a8a34",null).exports,"s-showcode":n(30).a}},r=Object(l.a)(c,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h4",[t._v("照片墙")]),t._v(" "),n("s-upload",{attrs:{uploadurl:"https://easy-mock.com/mock/5d08939197ae0a474a534950/file/addfile"}}),t._v(" "),n("s-showcode",{attrs:{code:t.code1},on:{"update:code":function(e){t.code1=e}}})],1)},[],!1,null,null,null);e.default=r.exports},46:function(t,e,n){"use strict";var a=n(17);n.n(a).a},47:function(t,e,n){"use strict";n(22);var a=n(0),o=n(56);a.a.component("s-icon",o.a);var i={name:"SButton",props:{types:{type:String,default:"normal"},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},icon:{type:String},loading:{type:Boolean},position:{type:String,default:"left",validator:function(t){return["left","right"].indexOf(t)>=0}}}},s=(n(46),n(1)),l=Object(s.a)(i,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"s-button",class:[""+t.types,"icon-"+t.position],attrs:{disabled:t.disabled},on:{click:function(e){return t.$emit("click")}}},[t.icon&&!t.loading?n("s-icon",{staticClass:"icon",attrs:{name:t.icon}}):t._e(),t._v(" "),t.loading?n("s-icon",{staticClass:"icon loading",attrs:{name:"loading"}}):t._e(),t._v(" "),n("span",{staticClass:"s-content"},[t._t("default")],2)],1)},[],!1,null,"7c05a15b",null);e.a=l.exports}}]);